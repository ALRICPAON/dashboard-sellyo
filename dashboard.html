<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Dashboard - Sellyo</title>
  <link rel="stylesheet" href="dashboard.css">
  <script type="module" src="js/firebase-auth-check.js"></script>
</head>
<body>
  <header>
    <img src="assets/logo.png" alt="Logo Sellyo" class="logo">
    <nav style="display: flex; align-items: center;">
      <ul>
        <li><a href="#" id="create-tunnel">Cr√©er un tunnel</a></li>
        <li><a href="#" id="view-tunnels">Mes tunnels</a></li>
        <li><a href="#" id="stats">Statistiques</a></li>
        <li><a href="#" id="upgrade">Passer Premium</a></li>
        <li><a href="#" id="logout">D√©connexion</a></li>
      </ul>
      <select id="lang-switch" style="margin-left: 1rem; background: #000; color: #fff; border: none; padding: 0.5rem;">
        <option value="fr">FR</option>
        <option value="en">EN</option>
      </select>
    </nav>
  </header>

  <main>
    <h1 id="welcome">Bienvenue üëã</h1>
    <div id="dashboard-content"></div>

    <div id="create-tunnel-form" style="display: none; background: #2a2a2a; padding: 2rem; border-radius: 10px; max-width: 600px; width: 100%; box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);">
      <h2>Cr√©er un nouveau tunnel</h2>
      <form id="tunnel-form">
        <label>Nom du tunnel *</label><br>
        <input type="text" id="tunnel-name" required><br><br>

        <label>Objectif du tunnel *</label><br>
        <input type="text" id="tunnel-goal" required><br><br>

        <label>Type de contenu *</label><br>
        <select id="tunnel-type" required>
          <option value="complet">Tunnel Complet</option>
          <option value="landing">Landing page seule</option>
          <option value="email">Email de relance</option>
          <option value="video">Script vid√©o</option>
        </select><br><br>

        <label>Secteur d‚Äôactivit√©</label><br>
        <input type="text" id="sector"><br><br>

        <label>Image de couverture</label><br>
        <input type="file" id="cover-image" accept="image/*"><br><br>

        <label>Vid√©o √† int√©grer</label><br>
        <input type="file" id="custom-video" accept="video/*"><br><br>

        <label>Description de l‚Äôoffre *</label><br>
        <textarea id="tunnel-desc" required></textarea><br><br>

        <label>Texte du bouton *</label><br>
        <input type="text" id="cta-text" required><br><br>

        <label>URL du bouton de paiement</label><br>
        <input type="url" id="payment-url"><br><br>

        <label>Utiliser un domaine personnalis√© ?</label><br>
        <input type="checkbox" id="use-custom-domain"><br><br>

        <div id="custom-domain-field" style="display: none;">
          <label>Nom de domaine (ex : tunnel.monsite.fr)</label><br>
          <input type="text" id="custom-domain"><br><br>
        </div>

        <button type="submit">G√©n√©rer le tunnel</button>
      </form>
    </div>
  </main>

  <script>
    // Langue switch (test)
    document.getElementById("lang-switch")?.addEventListener("change", (e) => {
      const lang = e.target.value;
      alert("Langue chang√©e en : " + lang);
    });

    // Affiche le formulaire quand on clique sur "Cr√©er un tunnel"
    document.getElementById("create-tunnel").addEventListener("click", () => {
      document.getElementById("create-tunnel-form").style.display = "block";
      document.getElementById("dashboard-content").innerHTML = "";
    });

    // Affiche le champ "domaine personnalis√©" si la case est coch√©e
    document.getElementById("use-custom-domain").addEventListener("change", function () {
      const customField = document.getElementById("custom-domain-field");
      customField.style.display = this.checked ? "block" : "none";
    });

    // G√®re le formulaire
    document.getElementById("tunnel-form").addEventListener("submit", function(e) {
      e.preventDefault();

      const name = document.getElementById("tunnel-name").value;
      const goal = document.getElementById("tunnel-goal").value;
      const type = document.getElementById("tunnel-type").value;
      const sector = document.getElementById("sector").value;
      const desc = document.getElementById("tunnel-desc").value;
      const cta = document.getElementById("cta-text").value;
      const payment = document.getElementById("payment-url").value;
      const wantsCustomDomain = document.getElementById("use-custom-domain").checked;
      const customDomain = wantsCustomDomain ? document.getElementById("custom-domain").value : null;

      alert(`Tunnel "${name}" g√©n√©r√© avec :
      - Objectif : ${goal}
      - Type : ${type}
      - Secteur : ${sector}
      - Bouton : ${cta}
      - Paiement : ${payment}
      - Domaine personnalis√© : ${customDomain || 'non'}`);
    });
  </script>
</body>
</html>
