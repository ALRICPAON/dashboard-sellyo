<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Cr√©er un tunnel ‚Äì Sellyo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="dashboard.css" />
  <script type="module" src="js/firebase-auth-check.js"></script>
  <script type="module" src="js/submit-tunnel.js"></script>
</head>
<body style="background:#111;color:#fff;font-family:sans-serif;">
  <div id="navbar-container"></div>
  <script>
    fetch('navbar.html')
      .then(r => r.text())
      .then(h => { document.getElementById('navbar-container').innerHTML = h; });
  </script>

  <main style="max-width:1000px;margin:2rem auto;padding:1rem;">
    <h2 style="text-align:center;color:#00ccff;">üÜï Cr√©er un tunnel multipage</h2>

    <form id="tunnel-form" class="card" style="padding:1.25rem;display:grid;gap:1rem;">

      <!-- Informations g√©n√©rales -->
      <fieldset class="card" style="padding:1rem;border-radius:.5rem;">
        <legend>Informations g√©n√©rales</legend>

        <label>Nom du tunnel *
          <input name="name" type="text" required />
        </label>

        <label>Objectif / description
          <input name="desc" type="text" placeholder="Promesse ou objectif principal" />
        </label>

        <label>Lien produit final (URL)
          <input name="redirectURL" type="url" placeholder="https://‚Ä¶" />
        </label>

        <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;">
          <label>Couleur principale
            <input name="mainColor" type="color" value="#00ccff" />
          </label>

          <label>Couleur des boutons
            <input name="buttonColor" type="color" value="#00ccff" />
          </label>
        </div>

        <label>Logo
          <input type="file" name="logoFile" accept="image/*" />
          <small>Facultatif ‚Äì appliqu√© sur toutes les pages</small>
        </label>

        <label>Image de couverture
          <input type="file" name="coverFile" accept="image/*" />
          <small>Image principale utilis√©e si la page n‚Äôa pas de visuel sp√©cifique</small>
        </label>
      </fieldset>

      <!-- Paiement & Tracking -->
      <fieldset class="card" style="padding:1rem;border-radius:.5rem;">
        <legend>Paiement & Tracking</legend>

        <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:1rem;">
          <label>Prix du produit
            <input name="payment_price" type="number" step="0.01" placeholder="49.00" />
          </label>

          <label>Devise
            <input name="currency" type="text" value="EUR" />
          </label>

          <label>Lien de paiement Stripe
            <input name="payment_link" type="url" placeholder="https://buy.stripe.com/‚Ä¶" />
          </label>
        </div>

        <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-top:.75rem;">
          <label>Facebook Pixel ID
            <input name="fb_pixel" type="text" placeholder="1234567890" />
          </label>

          <label>Google Tag Manager ID
            <input name="gtm_id" type="text" placeholder="GTM-XXXXXXX" />
          </label>
        </div>
      </fieldset>

      <!-- Pages -->
      <fieldset class="card" style="padding:1rem;border-radius:.5rem;">
        <legend>Pages du tunnel (max 8)</legend>
        <div id="pages-container"></div>
        <button type="button" id="add-page-btn" class="btn">‚ûï Ajouter une page</button>
      </fieldset>

      <div style="display:flex;gap:.75rem;justify-content:flex-end;">
        <a href="tunnels.html" class="btn">‚Ü©Ô∏è Retour</a>
        <button type="submit" class="btn btn-primary">‚úÖ G√©n√©rer le tunnel</button>
      </div>
    </form>
  </main>

  <!-- Template d'une page -->
  <template id="page-template">
    <fieldset class="page-block" style="border:1px solid #333;padding:1rem;border-radius:.5rem;margin-top:1rem;">
      <legend>Page <span class="page-index"></span></legend>

      <label>Type de page
        <select name="type">
          <option value="sales">Page de vente</option>
          <option value="optin">Page de capture</option>
          <option value="checkout">Page de paiement</option>
          <option value="upsell">Upsell (offre compl√©mentaire)</option>
          <option value="downsell">Downsell (offre alternative)</option>
          <option value="thankyou">Page de remerciement</option>
          <option value="webinar">Page de webinaire</option>
          <option value="custom">Page personnalis√©e</option>
        </select>
      </label>

      <label>Titre
        <input name="title" type="text" />
      </label>

      <label>Sous-titre
        <input name="subtitle" type="text" />
      </label>

      <!-- Objectif / Pr√©sentation -->
      <label>Objectif / Pr√©sentation (optionnel)
        <textarea name="objective" rows="3" placeholder="Texte d‚Äôintroduction de la page"></textarea>
      </label>

      <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;">
        <label>Image principale (Hero)
          <input type="file" name="heroImageFile" accept="image/*" />
        </label>

        <label>Vid√©o
          <input type="file" name="videoFile" accept="video/*" />
        </label>
      </div>

      <!-- Bloc optionnel pour OPTIN -->
      <div class="optin-fields" style="display:none; margin-top:.5rem;">
        <p style="margin:.25rem 0 .5rem;opacity:.8;">Champs du formulaire d‚Äôinscription :</p>
        <label><input type="checkbox" name="formName"> Nom</label>
        <label><input type="checkbox" name="formFirstname"> Pr√©nom</label>
        <label><input type="checkbox" name="formEmail" checked> Email</label>
        <label><input type="checkbox" name="formPhone"> T√©l√©phone</label>
        <label><input type="checkbox" name="formAddress"> Adresse</label>
      </div>

      <!-- Bloc optionnel pour CHECKOUT -->
      <div class="checkout-fields" style="display:none; margin-top:.5rem;">
        <label>R√©cap produit (checkout)
          <textarea name="productRecap" rows="2" placeholder="Description courte du produit achet√©"></textarea>
        </label>
      </div>

      <label>Texte du bouton (CTA)
        <input name="ctaText" type="text" placeholder="Je commence maintenant" />
      </label>

      <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;">
        <label>Action du bouton
          <select name="ctaAction">
            <option value="next">Aller √† la page suivante</option>
            <option value="url">Ouvrir une URL</option>
            <option value="checkout">Paiement</option>
          </select>
        </label>

        <label>URL du bouton (si action = URL)
          <input name="ctaUrl" type="url" placeholder="https://‚Ä¶" />
        </label>
      </div>

      <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;">
        <label>M√©ta titre (SEO)
          <input name="metaTitle" type="text" placeholder="Titre affich√© dans Google" />
        </label>

        <label>M√©ta description (SEO)
          <textarea name="metaDescription" rows="2" placeholder="Texte sous le titre dans Google"></textarea>
        </label>
      </div>

      <details style="margin-top:.5rem;">
        <summary>Texte & contenu optionnel</summary>
        <label>Probl√®me
          <textarea name="problem" rows="2"></textarea>
        </label>
        <label>Solution
          <textarea name="solution" rows="2"></textarea>
        </label>
        <label>B√©n√©fices (1 par ligne)
          <textarea name="benefits" rows="3"></textarea>
        </label>
        <label>Points cl√©s (1 par ligne)
          <textarea name="bullets" rows="3"></textarea>
        </label>
        <label>Garantie
          <input name="guarantee" type="text" placeholder="Satisfait ou rembours√© 30j" />
        </label>
        <label>Testimonials (JSON)
          <textarea name="testimonials" rows="2" placeholder='[{"name":"‚Ä¶","text":"‚Ä¶"}]'></textarea>
        </label>
        <label>FAQs (JSON)
          <textarea name="faqs" rows="2" placeholder='[{"q":"‚Ä¶","a":"‚Ä¶"}]'></textarea>
        </label>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;">
          <label>Activer timer ?
            <input name="timerEnabled" type="checkbox" />
          </label>
          <label>Dur√©e timer (minutes)
            <input name="evergreenMinutes" type="number" placeholder="20" />
          </label>
        </div>
      </details>

      <div style="display:flex;justify-content:flex-end;margin-top:.5rem;">
        <button type="button" class="btn btn-danger remove-page">üóë Supprimer cette page</button>
      </div>
    </fieldset>
  </template>
</body>
</html>
