<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Cr√©er un tunnel ‚Äì Sellyo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="dashboard.css" />
  <script type="module" src="js/firebase-auth-check.js"></script>
  <script type="module" src="js/submit-tunnel.js"></script>
</head>
<body style="background:#111;color:#fff;font-family:sans-serif;">
  <div id="navbar-container"></div>
  <script>
    fetch('navbar.html').then(r=>r.text()).then(h=>{document.getElementById('navbar-container').innerHTML=h});
  </script>

  <main style="max-width:1000px;margin:2rem auto;padding:1rem;">
    <h2 style="text-align:center;color:#00ccff;">üÜï Cr√©er un tunnel multipage</h2>

    <form id="tunnel-form" class="card" style="padding:1.25rem;display:grid;gap:1rem;">
      <!-- Bloc g√©n√©ral -->
      <fieldset class="card" style="padding:1rem;border-radius:.5rem;">
        <legend>Informations g√©n√©rales</legend>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;">
          <label>Nom du tunnel
            <input name="name" type="text" required />
          </label>
          <label>Lien produit (redirectURL)
            <input name="redirectURL" type="url" placeholder="https://‚Ä¶" />
          </label>

          <label>Couleur principale (mainColor)
            <input name="mainColor" type="text" placeholder="#00ccff" />
          </label>
          <label>Logo (logoUrl)
            <input name="logoUrl" type="url" placeholder="https://‚Ä¶/logo.png" />
          </label>

          <label>Image de couverture (coverUrl)
            <input name="coverUrl" type="url" placeholder="https://‚Ä¶/cover.jpg" />
          </label>
          <label>Pitch / Description (desc)
            <input name="desc" type="text" placeholder="Promesse, b√©n√©fice cl√©‚Ä¶" />
          </label>
        </div>
      </fieldset>

      <!-- Paiement & Tracking -->
      <fieldset class="card" style="padding:1rem;border-radius:.5rem;">
        <legend>Paiement & Tracking</legend>
        <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:1rem;">
          <label>Prix (payment.price)
            <input name="payment_price" type="number" step="0.01" placeholder="49.00" />
          </label>
          <label>Devise (currency)
            <input name="currency" type="text" value="EUR" />
          </label>
          <label>Stripe Payment Link
            <input name="payment_link" type="url" placeholder="https://buy.stripe.com/‚Ä¶" />
          </label>
        </div>

        <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-top:.75rem;">
          <label>Facebook Pixel ID
            <input name="fb_pixel" type="text" placeholder="1234567890" />
          </label>
          <label>GTM ID
            <input name="gtm_id" type="text" placeholder="GTM-XXXXXXX" />
          </label>
        </div>
      </fieldset>

      <!-- Pages dynamiques -->
      <fieldset class="card" style="padding:1rem;border-radius:.5rem;">
        <legend>Pages du tunnel (max 8)</legend>

        <div id="pages-container"></div>

        <div style="display:flex;gap:.5rem;margin-top:.75rem;">
          <button type="button" id="add-page-btn" class="btn">‚ûï Ajouter une page</button>
          <small style="opacity:.7;">Types : sales, optin, checkout, upsell, downsell, thankyou, webinar, custom</small>
        </div>
      </fieldset>

      <div style="display:flex;gap:.75rem;justify-content:flex-end;">
        <a href="tunnels.html" class="btn">‚Ü©Ô∏è Retour</a>
        <button type="submit" class="btn btn-primary">‚úÖ G√©n√©rer le tunnel</button>
      </div>
    </form>
  </main>

  <!-- Template d'une page -->
  <template id="page-template">
    <fieldset class="page-block" style="border:1px solid #333;padding:1rem;border-radius:.5rem;margin-top:1rem;">
      <legend>Page <span class="page-index"></span></legend>

      <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;">
        <label>Type
          <select name="type">
           <option value="sales">Page de vente</option>
<option value="optin">Page de capture</option>
<option value="checkout">Page de paiement</option>
<option value="upsell">Upsell (offre compl√©mentaire)</option>
<option value="downsell">Downsell (offre alternative)</option>
<option value="thankyou">Page de remerciement</option>
<option value="webinar">Page de webinaire</option>
<option value="custom">Personnalis√©e</option>
          </select>
        </label>

        <label>Titre <input name="title" type="text" /></label>
        <label>Sous-titre <input name="subtitle" type="text" /></label>
        <label>Hero image <input name="heroImage" type="url" placeholder="https://‚Ä¶" /></label>
        <label>Vid√©o <input name="videoUrl" type="url" placeholder="https://‚Ä¶" /></label>

        <label>CTA texte <input name="ctaText" type="text" placeholder="Je commence" /></label>
        <label>Action du CTA
          <select name="ctaAction">
            <option value="next">Aller √† la page suivante</option>
            <option value="url">Ouvrir une URL</option>
            <option value="checkout">Paiement</option>
          </select>
        </label>
        <label>URL du CTA (si action = url) <input name="ctaUrl" type="url" placeholder="https://‚Ä¶" /></label>

        <label>Meta title <input name="metaTitle" type="text" /></label>
        <label>Meta description <input name="metaDescription" type="text" /></label>
      </div>

      <details style="margin-top:.5rem;">
        <summary>Texte & √©l√©ments (optionnels)</summary>
        <label>Probl√®me <textarea name="problem" rows="2"></textarea></label>
        <label>Solution <textarea name="solution" rows="2"></textarea></label>
        <label>B√©n√©fices (1 par ligne) <textarea name="benefits" rows="3"></textarea></label>
        <label>Bullets (1 par ligne) <textarea name="bullets" rows="3"></textarea></label>
        <label>Garantie <input name="guarantee" type="text" placeholder="Satisfait ou rembours√© 30j" /></label>
        <label>Testimonials (JSON) <textarea name="testimonials" rows="2" placeholder='[{"name":"‚Ä¶","text":"‚Ä¶"}]'></textarea></label>
        <label>FAQs (JSON) <textarea name="faqs" rows="2" placeholder='[{"q":"‚Ä¶","a":"‚Ä¶"}]'></textarea></label>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;">
          <label>Activer timer ? <input name="timerEnabled" type="checkbox" /></label>
          <label>Evergreen (minutes) <input name="evergreenMinutes" type="number" placeholder="20" /></label>
        </div>
      </details>

      <div style="display:flex;justify-content:flex-end;margin-top:.5rem;">
        <button type="button" class="btn btn-danger remove-page">üóë Supprimer cette page</button>
      </div>
    </fieldset>
  </template>
</body>
</html>
