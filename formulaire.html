<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Cr√©er un contenu ‚Äì Sellyo</title>
  <link rel="stylesheet" href="dashboard.css">
  <script type="module" src="js/firebase-auth-check.js"></script>
  <script type="module" src="js/tunnel-submit.js"></script>
</head>

<body style="background-color: #111; color: white; font-family: sans-serif;">
  <header>
    <a href="dashboard.html">
      <img src="assets/logo.png" alt="Logo Sellyo" class="logo" style="cursor: pointer;">
    </a>
    <nav style="display: flex; align-items: center;">
      <ul>
        <li><a href="formulaire.html">Cr√©er un tunnel</a></li>
        <li><a href="tunnels.html">Mes tunnels</a></li>
        <li><a href="clients.html">Clients</a></li>
        <li><a href="stats.html">Statistiques</a></li>
        <li><a href="index.html">D√©connexion</a></li>
      </ul>
      <select id="lang-switch" style="margin-left: 1rem; background: #000; color: #fff; border: none; padding: 0.5rem;">
        <option value="fr">FR</option>
        <option value="en">EN</option>
      </select>
    </nav>
  </header>

  <main>
    <div id="create-tunnel-form" style="background: #2e2e2e; padding: 2rem; border-radius: 10px; max-width: 700px; width: 100%; margin: 2rem auto;">
      <h2>Cr√©er un contenu</h2>
      <form id="tunnel-form">
        <label>Identifiant public *</label><br>
        <input type="text" id="folderName" required><br><br>

        <label>Nom de la page *</label><br>
        <input type="text" id="slug" required><br>
        <small style="color:#aaa;">L'extension <strong>.html</strong> sera g√©r√©e automatiquement</small><br><br>

        <label>Type de contenu *</label><br>
        <select id="tunnel-type" required>
          <option value="" disabled selected>Choisir...</option>
          <option value="complet">Tunnel Complet</option>
          <option value="landing">Landing page seule</option>
          <option value="email">Email de relance</option>
          <option value="video">Script vid√©o</option>
        </select><br><br>

        <div id="form-content-fields"></div>

        <label>Couleur principale du bouton</label><br>
        <input type="color" id="mainColor" value="#00ccff"><br><br>

        <label>Couleur de fond</label><br>
        <input type="color" id="backgroundColor" value="#111111"><br><br>

        <button type="submit" id="generate-button">G√©n√©rer <span id="loader-zone"></span></button>
      </form>
    </div>

    <div id="form-email-fields" style="display: none; background: #2e2e2e; padding: 2rem; border-radius: 10px; max-width: 700px; width: 100%; margin: 2rem auto;">
      <h2>Email de relance</h2>

      <label>Associer √† un tunnel ou une landing</label><br>
      <select id="linked-content">
        <option value="">Aucun</option>
        <!-- Inject√© dynamiquement -->
      </select><br><br>

      <label>Ou s√©lectionner des leads manuellement</label><br>
      <input type="text" id="manual-client-list" placeholder="Ex : jean@email.com, alice@email.com"><br>
      <small style="color:#aaa;">(s√©par√©s par des virgules)</small><br><br>

      <label for="email-type">Type de mail</label><br>
      <select id="email-type">
        <option value="mail-initial">Email initial</option>
        <option value="relance1">Relance J+2</option>
        <option value="relance2">Relance J+5</option>
        <option value="relance3">Relance J+7</option>
      </select><br><br>

      <label>Mode d‚Äôenvoi</label><br>
      <select id="email-send-mode">
        <option value="now">Envoyer maintenant</option>
        <option value="schedule">Programmer l‚Äôenvoi</option>
      </select><br><br>

      <label>Date d‚Äôenvoi (si programm√©)</label><br>
      <input type="date" id="email-schedule-date"><br><br>

      <label>Heure d‚Äôenvoi</label><br>
      <input type="time" id="email-schedule-hour"><br><br>

      <label>Lien produit (optionnel)</label><br>
      <input type="url" id="payment" placeholder="https://..."><br><br>

      <label>Prix (optionnel)</label><br>
      <input type="text" id="price" placeholder="Ex : 47‚Ç¨"><br><br>
    </div>

    <div id="form-tunnel-complet" style="display: none; background: #2e2e2e; padding: 2rem; border-radius: 10px; max-width: 700px; width: 100%; margin: 2rem auto;">
      <h2>Tunnel Complet ‚Äì Pages personnalis√©es</h2>

      <label>Logo de la marque</label><br>
      <input type="file" id="full-logo" accept="image/*"><br><br>

      <label>Couleur de fond</label><br>
      <input type="color" id="full-background-color" value="#121212"><br><br>

      <label>Couleur du bouton</label><br>
      <input type="color" id="full-button-color" value="#ff9900"><br><br>

      <label>Vid√©o principale</label><br>
      <input type="file" id="full-video" accept="video/*"><br><br>

      <label>URL globale (bouton final)</label><br>
      <input type="url" id="full-main-url"><br><br>

      <div id="tunnel-pages-complet"></div>

      <button type="button" id="add-page-full">+ Ajouter une page</button><br><br>
      <button type="button" id="submit-full-tunnel">G√©n√©rer le tunnel complet</button>
    </div>
  </main>

  <script>
    // Message d‚Äôalerte si ?tunnel=1
    window.addEventListener("DOMContentLoaded", () => {
      const urlParams = new URLSearchParams(window.location.search);
      if (urlParams.get("tunnel") === "1") {
        alert("üõ†Ô∏è G√©n√©ration en cours‚Ä¶ Votre tunnel sera visible dans quelques instants.");
      }
    });
  </script>
</body>
</html>
